{% extends 'base.html' %}

{% block title %}AI Insights - Bamboo Money{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h3 mb-0">
            <i class="bi bi-lightbulb text-warning me-2"></i>Financial Insights
        </h1>
        <p class="text-muted mb-0">{{ month_name }}</p>
    </div>
</div>

<!-- Summary Cards -->
<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h6 class="text-muted">This Month</h6>
                <h3 class="text-danger">${{ current_total|floatformat:2 }}</h3>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <h6 class="text-muted">Last Month</h6>
                <h3>${{ last_total|floatformat:2 }}</h3>
            </div>
        </div>
    </div>
</div>

<!-- Insights -->
<div class="card">
    <div class="card-header bg-white">
        <h5 class="card-title mb-0">
            <i class="bi bi-stars me-2"></i>AI-Generated Insights
        </h5>
    </div>
    <div class="card-body">
        {% if insights %}
        <div class="row g-4">
            {% for insight in insights %}
            <div class="col-md-6">
                <div class="border rounded p-3 h-100
                    {% if insight.type == 'success' %}border-success bg-success bg-opacity-10
                    {% elif insight.type == 'warning' %}border-warning bg-warning bg-opacity-10
                    {% elif insight.type == 'danger' %}border-danger bg-danger bg-opacity-10
                    {% else %}border-info bg-info bg-opacity-10{% endif %}">
                    <div class="d-flex align-items-start">
                        <div class="me-3">
                            {% if insight.type == 'success' %}
                            <i class="bi bi-check-circle-fill text-success fs-4"></i>
                            {% elif insight.type == 'warning' %}
                            <i class="bi bi-exclamation-triangle-fill text-warning fs-4"></i>
                            {% elif insight.type == 'danger' %}
                            <i class="bi bi-x-circle-fill text-danger fs-4"></i>
                            {% else %}
                            <i class="bi bi-info-circle-fill text-info fs-4"></i>
                            {% endif %}
                        </div>
                        <div>
                            <h6 class="mb-1">{{ insight.title }}</h6>
                            <p class="mb-0 text-muted small">{{ insight.message }}</p>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-5">
            <i class="bi bi-graph-up fs-1 text-muted"></i>
            <p class="mt-2 text-muted">Upload some statements to see personalized insights</p>
            <a href="{% url 'statements:upload' %}" class="btn btn-primary">Upload Statement</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="card mt-4">
    <div class="card-body">
        <h6><i class="bi bi-robot me-2"></i>About AI Insights</h6>
        <p class="text-muted small mb-0">
            These insights are generated by analyzing your spending patterns. As you upload more statements,
            the insights become more personalized and accurate. Premium features like natural language
            financial queries and advanced recommendations are coming soon!
        </p>
    </div>
</div>
{% endblock %}
