run:
  run_id: "phase1_smoke_v1"
  seed: 1337
  output_dir: "data/runs/phase1_smoke_v1"
  store_prompts: true
  store_raw_responses: true

game:
  name: "prisoners_dilemma"
  payoff_matrix:
    C:
      C: [3, 3]
      D: [0, 5]
    D:
      C: [5, 0]
      D: [1, 1]

horizon:
  type: "fixed"     # "fixed" or "geometric"
  n_rounds: 50
  stop_prob: 0.02   # only used if geometric

experiment:
  replicates: 5
  conditions:
    - name: "MockLLM_cooperative_vs_ALLD"
      agent_a:
        ref: "agents/llm_default.yaml"
        overrides:
          persona: "cooperative"
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "ALLD"

    - name: "TFT_vs_ALLD"
      agent_a:
        ref: "agents/policies.yaml"
        overrides:
          policy: "TFT"
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "ALLD"

    - name: "TFT_vs_WSLS"
      agent_a:
        ref: "agents/policies.yaml"
        overrides:
          policy: "TFT"
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "WSLS"

    - name: "CrewAI_strategist_vs_TFT"
      agent_a:
        ref: "agents/crewai_base.yaml"
        overrides:
          agent_key: "strategic_cooperator"
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "TFT"

    - name: "CrewAI_ruthless_vs_ALLD"
      agent_a:
        ref: "agents/crewai_base.yaml"
        overrides:
          agent_key: "ruthless_optimizer"
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "ALLD"

    - name: "CrewAI_diplomat_vs_TFT"
      agent_a:
        ref: "agents/crewai_base.yaml"
        overrides:
          agent_key: "adaptive_diplomat"
          temperature: 0.7
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "TFT"

    - name: "CrewAI_diplomat_vs_GRIM"
      agent_a:
        ref: "agents/crewai_base.yaml"
        overrides:
          agent_key: "adaptive_diplomat"
          temperature: 0.7
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "GRIM"

    - name: "CrewAI_diplomat_vs_ALLD_hot"
      agent_a:
        ref: "agents/crewai_base.yaml"
        overrides:
          agent_key: "adaptive_diplomat"
          temperature: 1.2
      agent_b:
        ref: "agents/policies.yaml"
        overrides:
          policy: "ALLD"

metrics:
  collapse:
    k: 10
    cooperation_threshold: 0.2
  report:
    - cooperation_rate
    - cooperation_rate_over_time
    - retaliation_rate
    - forgiveness_rate
    - exploitability_payoff_gap
    - time_to_collapse